let tfData=[],tfCurrent=0,tfScore=0,tfAnswered=!1,tfTimerInterval=null,tfSeconds=0,tfStartHearts=0;async function startTrueFalse(){try{const t=await fetch("/api/true-false");tfData=await t.json()}catch(t){return void showNotification("Failed to load questions!")}tfCurrent=0,tfScore=0,tfAnswered=!1,tfSeconds=0,tfStartHearts=getHearts().current,document.getElementById("tfStart").style.display="none",document.getElementById("tfArea").style.display="block",updateStreak(),clearInterval(tfTimerInterval),tfTimerInterval=setInterval(()=>{tfSeconds++;const t=Math.floor(tfSeconds/60),e=tfSeconds%60;document.getElementById("tfTimer").textContent=`‚è±Ô∏è ${t}:${e.toString().padStart(2,"0")}`},1e3),showTFQuestion()}function showTFQuestion(){if(tfCurrent>=tfData.length)return void finishTrueFalse();tfAnswered=!1;const t=tfData[tfCurrent],e=tfData.length;document.getElementById("tfProgressFill").style.width=tfCurrent/e*100+"%",document.getElementById("tfProgressText").textContent=`${tfCurrent+1}/${e}`;const n=document.getElementById("tfHearts");if(n){const t=getHearts();n.textContent="‚ù§Ô∏è".repeat(t.current)+"üñ§".repeat(5-t.current)}document.getElementById("tfStatement").textContent=t.statement;document.getElementById("tfButtons").innerHTML='\n    <button class="tf-btn tf-true" onclick="answerTF(true)">‚úÖ TRUE</button>\n    <button class="tf-btn tf-false" onclick="answerTF(false)">‚ùå FALSE</button>\n  ',document.getElementById("tfFact").style.display="none",document.getElementById("tfNextBtn").style.display="none","undefined"!=typeof Mascot&&Mascot.onThink();const r=document.getElementById("tfCard");r.style.animation="none",r.offsetHeight,r.style.animation="fadeUp 0.3s ease"}function answerTF(t){if(tfAnswered)return;tfAnswered=!0;const e=tfData[tfCurrent],n=t===e.answer,r=document.querySelectorAll(".tf-btn");if(r.forEach(t=>t.classList.add("disabled")),n){(t?r[0]:r[1]).classList.add("tf-correct"),tfScore++,playSound("correct"),addXP(10),"undefined"!=typeof Mascot&&Mascot.onCorrect()}else{const e=t?r[0]:r[1],n=t?r[1]:r[0];e.classList.add("tf-wrong"),n.classList.add("tf-correct"),playSound("wrong"),loseHeart(),"undefined"!=typeof Mascot&&Mascot.onWrong()}if(e.fact){const t=document.getElementById("tfFact");t.textContent="üí° "+e.fact,t.style.display="block"}const a=document.getElementById("tfNextBtn");a.textContent=tfCurrent<tfData.length-1?"NEXT ‚Üí":"SEE RESULTS üèÜ",a.style.display="inline-flex";const o=document.getElementById("tfHearts");if(o){const t=getHearts();o.textContent="‚ù§Ô∏è".repeat(t.current)+"üñ§".repeat(5-t.current)}}function nextTFQuestion(){hasHearts()&&(tfCurrent++,showTFQuestion())}function finishTrueFalse(){clearInterval(tfTimerInterval);const t=tfData.length;addXP(50),tfScore===t&&addXP(25),markNodeComplete("true-false"),tfSeconds<60&&awardAchievement("speed_demon"),getHearts().current===tfStartHearts&&awardAchievement("no_hearts_lost"),tfScore===t&&awardAchievement("perfect_score"),showResults(`True or False ‚Äî ${tfSeconds}s!`,tfScore,t,"true-false")}