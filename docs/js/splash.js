let currentSplashStep=1;function nextSplashStep(e){playSound("flip");const t=document.getElementById("splashStep"+currentSplashStep);t&&(t.classList.remove("active"),t.style.animation="splashSlideOut 0.4s ease forwards"),document.querySelectorAll(".splash-dot").forEach(e=>e.classList.remove("active"));const s=document.querySelector(`.splash-dot[data-step="${e}"]`);s&&s.classList.add("active"),setTimeout(()=>{currentSplashStep=e;const t=document.getElementById("splashStep"+e);t&&(t.classList.add("active"),t.style.animation="splashSlideIn 0.5s ease forwards"),"undefined"!=typeof Mascot&&(Mascot.setSize("large"),Mascot.onSplashStep(e)),4===e&&setTimeout(()=>{const e=document.getElementById("splashName");e&&e.focus()},500)},400)}function enterGame(){const e=document.getElementById("splashName"),t=(e?e.value.trim():"")||"Explorer";localStorage.setItem("uaequest_player",t),playSound("correct"),"undefined"!=typeof Mascot&&(Mascot.setState("celebrate"),Mascot.setSize(""));const s=document.getElementById("splashOverlay");s.style.animation="splashFadeOut 0.8s ease forwards",setTimeout(()=>{s.style.display="none";const e=document.getElementById("mainPage");e.style.display="block",e.style.animation="fadeUp 0.6s ease";const a=document.getElementById("heroPlayerName");a&&(a.textContent=t.toUpperCase()),showNotification(`Welcome, ${t}! Let's explore UAE culture!`)},800)}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("splashName");if(e){e.addEventListener("keydown",e=>{"Enter"===e.key&&enterGame()});const t=localStorage.getItem("uaequest_player");t&&"Explorer"!==t&&(e.value=t)}const t=document.getElementById("splashOverlay");t&&"none"!==t.style.display&&"undefined"!=typeof Mascot&&(Mascot.setSize("large"),setTimeout(()=>Mascot.onSplashStep(1),800));if(localStorage.getItem("uaequest_splash_seen")){const e=document.getElementById("splashOverlay");e&&(e.style.display="none");const t=document.getElementById("mainPage");if(t){t.style.display="block";const e=document.getElementById("heroPlayerName"),s=localStorage.getItem("uaequest_player")||"Explorer";e&&(e.textContent=s.toUpperCase())}}});const origEnterGame=enterGame;enterGame=function(){localStorage.setItem("uaequest_splash_seen","true"),origEnterGame()};