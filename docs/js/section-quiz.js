let sectionQuizData=[],sectionQuizCurrent=0,sectionQuizScore=0,sectionQuizTotal=0,sectionQuizGame="",sqStartHearts=0;function startSectionQuiz(t){sectionQuizGame=t,sectionQuizCurrent=0,sectionQuizScore=0,sqStartHearts=getHearts().current,fetch(`/api/section-quiz/${t}`).then(t=>t.json()).then(t=>{sectionQuizData=t,sectionQuizTotal=t.length;const e=document.getElementById("sectionQuizStart"),n=document.getElementById("sectionQuizArea");e&&(e.style.display="none"),n&&(n.style.display="block"),showSectionQuestion(),speakText("Let's see what you learned! Here is question one.")})}function showSectionQuestion(){if(sectionQuizCurrent>=sectionQuizData.length)return void finishSectionQuiz();const t=sectionQuizData[sectionQuizCurrent],e=sectionQuizCurrent+1,n=document.getElementById("sqProgressFill"),o=document.getElementById("sqProgressText");n&&(n.style.width=e/sectionQuizTotal*100+"%"),o&&(o.textContent=`${e}/${sectionQuizTotal}`);const s=document.getElementById("sqScore");s&&(s.textContent=`SCORE: ${sectionQuizScore}`);const i=document.getElementById("sqCard");i.style.animation="none",i.offsetHeight,i.style.animation="fadeUp 0.4s ease";document.getElementById("sqQuestion").textContent=t.question;const c=document.getElementById("sqOptions");c.innerHTML="",t.options.forEach((t,e)=>{const n=document.createElement("button");n.className="quiz-option",n.textContent=t,n.onclick=()=>answerSectionQuestion(e,n),c.appendChild(n)}),document.getElementById("sqNextBtn").style.display="none",document.getElementById("sqFact").style.display="none",speakText(t.question)}function answerSectionQuestion(t,e){const n=sectionQuizData[sectionQuizCurrent],o=document.querySelectorAll("#sqOptions .quiz-option");o.forEach(t=>t.classList.add("disabled")),t===n.correct?(e.classList.add("correct"),sectionQuizScore++,playSound("correct"),addXP(10),speakText("Correct! "+n.fact)):(e.classList.add("wrong"),o[n.correct].classList.add("correct"),playSound("wrong"),loseHeart(),speakText("Not quite! "+n.fact));const s=document.getElementById("sqScore");s&&(s.textContent=`SCORE: ${sectionQuizScore}`);const i=document.getElementById("sqFact");i.textContent=n.fact,i.style.display="block",document.getElementById("sqNextBtn").style.display="inline-flex"}function nextSectionQuestion(){hasHearts()&&(sectionQuizCurrent++,showSectionQuestion())}function finishSectionQuiz(){addXP(50),sectionQuizScore===sectionQuizTotal&&addXP(25),markNodeComplete(sectionQuizGame),getHearts().current===sqStartHearts&&awardAchievement("no_hearts_lost"),sectionQuizScore===sectionQuizTotal&&awardAchievement("perfect_score"),showResults("What Did You Learn?",sectionQuizScore,sectionQuizTotal,sectionQuizGame)}