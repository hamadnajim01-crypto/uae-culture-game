<%- include('partials/header') %>

<div class="page-header">
  <div class="section-badge">ğŸ› TASTE</div>
  <h1><span class="gold" data-i18n="traditionalUae">Traditional UAE</span> <span data-i18n="foodPage">Food</span></h1>
  <p>Taste the amazing flavors that have been part of Emirati culture for centuries</p>
</div>

<div class="page-voice-bar">
  <button class="voice-btn" data-text="Welcome to Traditional UAE Food! Get ready to discover the amazing flavors that have been part of Emirati culture for centuries. From Machboos to Luqaimat, these dishes are delicious! Read about each one, then take the quiz at the end!" onclick="toggleVoiceBtn(this)">ğŸ”Š Listen</button>
</div>

<div class="content-grid">
  <% foods.forEach((food, i) => { %>
    <div class="content-card" style="animation-delay: <%= i * 0.1 %>s">
      <div class="content-card-header">
        <div class="content-card-emoji"><%= food.emoji %></div>
        <div>
          <div class="content-card-title"><%= food.name %></div>
          <div class="content-card-arabic"><%= food.nameAr %></div>
        </div>
      </div>
      <div class="content-card-body"><%= food.description %></div>
      <div class="ingredients-list">
        <% food.ingredients.forEach(ing => { %>
          <span class="ingredient-tag"><%= ing %></span>
        <% }) %>
      </div>
      <button class="voice-btn" style="margin-top:12px" data-text="<%= food.name %>. <%= food.description %>" onclick="toggleVoiceBtn(this)">ğŸ”Š Listen</button>
    </div>
  <% }) %>
</div>

<!-- SECTION QUIZ: What Did You Learn? -->
<div class="section-quiz-header">
  <div class="section-badge">ğŸ§  QUIZ TIME</div>
  <h2 class="section-title" style="text-align:center;">What Did You <span class="gold" style="background:linear-gradient(135deg,#FFD700,#FF6B35);-webkit-background-clip:text;-webkit-text-fill-color:transparent;">Learn</span>?</h2>
  <p class="section-subtitle" style="text-align:center; margin:0 auto;">Let's see if you remember what we just taught you about UAE food!</p>
</div>

<div class="section-quiz">
  <div id="sectionQuizStart" class="start-screen">
    <h2>Ready to Test Your Knowledge?</h2>
    <p>Answer 5 questions about the food you just read about. Earn up to 3 stars!</p>
    <button class="btn btn-primary btn-lg" onclick="startSectionQuiz('food')">START QUIZ ğŸ›</button>
  </div>

  <div id="sectionQuizArea" style="display:none;">
    <div class="quiz-progress">
      <div class="quiz-progress-bar">
        <div class="quiz-progress-fill" id="sqProgressFill"></div>
      </div>
      <div class="quiz-progress-text" id="sqProgressText">1/5</div>
    </div>

    <div class="quiz-score" id="sqScore">SCORE: 0</div>

    <div class="quiz-card" id="sqCard">
      <div class="quiz-question" id="sqQuestion">Loading...</div>
      <div class="quiz-options" id="sqOptions"></div>
      <div class="quiz-fact" id="sqFact" style="display:none;"></div>
      <div class="quiz-next">
        <button class="btn btn-primary" id="sqNextBtn" style="display:none;" onclick="nextSectionQuestion()">NEXT â†’</button>
      </div>
    </div>
  </div>
</div>

<div class="cta-section">
  <a href="/arabic" class="btn btn-primary btn-lg">NEXT: LEARN ARABIC ğŸ“–</a>
</div>

<script src="/js/section-quiz.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    resetHearts();
    markNodeComplete('food');
  });
</script>
<%- include('partials/footer') %>
